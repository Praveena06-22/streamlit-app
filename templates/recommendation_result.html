<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recommendation Results - Smart Crop Recommendation System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <nav>
        <a href="{{ url_for('dashboard') }}" class="brand">Smart Crop Recommendation System</a>
        <div class="nav-links">
            <a href="{{ url_for('dashboard') }}" class="nav-btn">Dashboard</a>
            <a href="{{ url_for('soil_analysis') }}" class="nav-btn">Soil Analysis</a>
            <a href="{{ url_for('crop_recommendation') }}" class="nav-btn">Crop Recommendation</a>
            <a href="{{ url_for('logout') }}" class="nav-btn logout">Logout</a>
        </div>
    </nav>

    <div class="container">
        <h1>Crop Recommendation Results</h1>

        <div class="card">
            <h2>Input Parameters</h2>
            <div class="parameters-grid">
                <div class="parameter-group">
                    <h3>Soil Content</h3>
                    <div class="parameter">
                        <label>Nitrogen (N):</label>
                        <span>{{ nitrogen }} mg/kg</span>
                    </div>
                    <div class="parameter">
                        <label>Phosphorus (P):</label>
                        <span>{{ phosphorus }} mg/kg</span>
                    </div>
                    <div class="parameter">
                        <label>Potassium (K):</label>
                        <span>{{ potassium }} mg/kg</span>
                    </div>
                    <div class="parameter">
                        <label>pH Value:</label>
                        <span>{{ ph }}</span>
                    </div>
                </div>

                <div class="parameter-group">
                    <h3>Weather Conditions</h3>
                    <div class="parameter">
                        <label>Temperature:</label>
                        <span>{{ temperature }}Â°C</span>
                    </div>
                    <div class="parameter">
                        <label>Annual Rainfall:</label>
                        <span>{{ rainfall }} mm</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Recommended Crop</h2>
            <div class="recommendations">
                {% if recommended_crops %}
                    {% set crop = recommended_crops[0] %}
                    <div class="single-crop">
                        <h3>{{ crop.name }}</h3>
                        <div class="crop-details">
                            <p><strong>Confidence:</strong> {{ "%.2f"|format(crop.confidence * 100) }}%</p>
                            <p><strong>Expected Yield:</strong> {{ crop.yield_estimate }} tons/hectare</p>
                            <p><strong>Growing Season:</strong> {{ crop.season }}</p>
                        </div>
                    </div>
                {% else %}
                    <div class="placeholder-message">
                        <p>Based on the provided soil content and weather conditions:</p>
                        <ul>
                            {% if nitrogen|float < 50 %}
                            <li>Consider increasing nitrogen content through fertilization</li>
                            {% endif %}
                            {% if phosphorus|float < 30 %}
                            <li>Phosphorus levels are low, may need supplementation</li>
                            {% endif %}
                            {% if potassium|float < 30 %}
                            <li>Potassium levels could be improved</li>
                            {% endif %}
                            {% if ph|float < 5.5 %}
                            <li>Soil is acidic, consider lime application</li>
                            {% elif ph|float > 7.5 %}
                            <li>Soil is alkaline, consider sulfur application</li>
                            {% endif %}
                        </ul>
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="actions">
            <a href="{{ url_for('crop_recommendation') }}" class="btn">Try Different Parameters</a>
        </div>
    </div>

    <style>
        .parameters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .parameter-group {
            background-color: #f8f9fa;
            padding: 1.5rem;
            border-radius: 4px;
        }

        .parameter {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }

        .parameter:last-child {
            border-bottom: none;
        }

        .parameter label {
            color: #2c3e50;
            font-weight: 500;
        }

        .parameter span {
            color: #34495e;
        }

        .single-crop {
            max-width: 600px;
            margin: 0 auto;
            background-color: #f8f9fa;
            padding: 1.5rem;
            border-radius: 4px;
            border: 1px solid #eee;
        }

        .crop-item h3 {
            color: #2c3e50;
            margin-top: 0;
            margin-bottom: 1rem;
        }

        .crop-details p {
            margin: 0.5rem 0;
            color: #34495e;
        }

        .placeholder-message {
            background-color: #f8f9fa;
            padding: 1.5rem;
            border-radius: 4px;
        }

        .placeholder-message ul {
            margin-top: 1rem;
            padding-left: 1.5rem;
        }

        .placeholder-message li {
            color: #34495e;
            margin-bottom: 0.5rem;
        }

        .actions {
            margin-top: 2rem;
            text-align: center;
        }
    </style>
</body>
</html>
